<?php
 class Omx_Hooks_Model_Data extends Mage_Core_Model_Abstract { protected function _construct () { $this->_init('hooks/data'); } public function getXml ( $encrypted = true ) { if (!$encrypted){ return Mage::helper('core')->decrypt($this->getXmlString()); } return $this->xmlString; } public function getChildren () { return $this ->getCollection() ->addFieldToFilter('parent_id',array('eq' => $this->omx_id)) ->load(); } public function getSiblings () { return $this ->getCollection() ->addFieldToFilter('parent_id',array('eq' => $this->parent_id)) ->addFieldToFilter('omx_id', array('neq'=> $this->omx_id)) ->load(); } }