<?php
 class Omx_Hooks_Model_Xml_Inventory_Information_Request extends Omx_Hooks_Model_Xml_Abstract { protected $_product; protected $_quote; protected $_root; public function __construct (Mage_Catalog_Model_Product $product) { parent::__construct(); $this->_product = $product; $this->createRootElement(); $this->appendUdiParams(); $this->appendItems(); } protected function createRootElement () { $rootElement = $this->createSafeElement('InventoryInformationRequest'); $versionAttribute = $this->xml->createAttribute('version'); $rootElement->appendChild( $versionAttribute ); $rootAttributeValue = $this->xml->createTextNode('1.00'); $versionAttribute->appendChild($rootAttributeValue); $rootElement = $this->xml->appendChild($rootElement); $this->_root = $rootElement; } protected function appendUdiParams () { $UDIParameter = $this->_root->appendChild( $this->createSafeElement('UDIParameter') ); $realNonInventoryItemAvailability = $this->createSafeElement('Parameter', 'false'); $realNonInventoryItemAvailabilityText = $this->xml->createTextNode('RealNonInventoryItemAvailability'); $realNonInventoryItemAvailabilityFlag= $this->xml->createAttribute('key'); $realNonInventoryItemAvailabilityFlag->appendChild($realNonInventoryItemAvailabilityText); $realNonInventoryItemAvailability->appendChild($realNonInventoryItemAvailabilityFlag); $UDIParameter->appendChild ($realNonInventoryItemAvailability); } protected function appendItems () { $items = $this->_root->appendChild( $this->createSafeElement('Items') ); $item = $this->createSafeElement('Item'); $items->appendChild( $item ); $itemAttribute = $this->xml->createAttribute('itemCode'); $itemAttributeValue = $this->xml->createTextNode($this->_product->getSku()); $itemAttribute->appendChild($itemAttributeValue); $item->appendChild($itemAttribute); } }