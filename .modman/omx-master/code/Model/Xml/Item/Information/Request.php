<?php
 class Omx_Hooks_Model_Xml_Item_Information_Request extends Omx_Hooks_Model_Xml_Abstract { protected $_product; protected $_root; public function __construct (Mage_Catalog_Model_Product $product) { parent::__construct(); $this->_product = $product; $this->createRootElement(); $this->appendUdiParams(); } protected function createRootElement () { $rootElement = $this->createSafeElement('ItemInformationRequest'); $versionAttribute = $this->xml->createAttribute('version'); $rootElement->appendChild( $versionAttribute ); $rootAttributeValue = $this->xml->createTextNode('1.00'); $versionAttribute->appendChild($rootAttributeValue); $rootElement = $this->xml->appendChild($rootElement); $this->_root = $rootElement; } protected function appendUdiParams () { $UDIParameter = $this->_root->appendChild( $this->createSafeElement('UDIParameter') ); $itemCodeParameter = $this->createSafeElement('Parameter', $this->_product->getSku()); $itemCodeParameterAttrText = $this->xml->createTextNode('ItemCode'); $itemCodeParameterAttr= $this->xml->createAttribute('key'); $itemCodeParameterAttr->appendChild($itemCodeParameterAttrText); $itemCodeParameter->appendChild($itemCodeParameterAttr); $UDIParameter->appendChild ($itemCodeParameter); } }