<?php
 class Omx_Hooks_OmxpricingController extends Omx_Hooks_Controller_Abstract { public function indexAction() { $this->_forward('noRoute'); } public function itemAction() { $quote = Mage::getSingleton('checkout/session')->getQuote(); if (array_key_exists('add', $this->_params) && array_key_exists('omxdiscount', $this->_post) ) { Mage::helper('hooks/omxpricing')->addSelectedItemsToQuote( $this->_post['omxdiscount'], $quote ); } elseif(array_key_exists('remove', $this->_params)) { Mage::helper('hooks/omxpricing')->removeSelectedItemsFromQuote( $this->_params['remove'], $quote ); } $quote->save(); $this->setRedirectDesitination(); $this->_redirect($this->_redirect); } }