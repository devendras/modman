<?php
 class Omx_Hooks_Block_Giftcertificate_Check extends Mage_Core_Block_Template { private $_giftCertCode; private $_certificate; public $certCode; public $certBalance; public $certExpiryDate; public $certValid; public $success; protected function _construct(){ parent::_construct(); $gcCode = $this->getRequest()->getParam('giftcertificate_code', ''); $this->_giftCertCode = Mage::helper('hooks')->noXSS($gcCode); $this->_certificate = Mage::getModel('hooks/giftcertificate_certificate', $this->_giftCertCode); $this->success = $this->_certificate->loadDetails(); if ($this->success) { $this->certCode = $this->_certificate->certCode; $this->certBalance = $this->_certificate->certBalance; $this->certExpiryDate = $this->_certificate->certExpiryDate; $this->certValid = $this->_certificate->certValid; } $this->error = $this->_certificate->error; } protected function _prepareLayout(){ parent::_prepareLayout(); } public function getOmxGiftCertCode() { return $this->_giftCertCode; } }