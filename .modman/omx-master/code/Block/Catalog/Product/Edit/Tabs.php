<?php
 class Omx_Hooks_Block_Catalog_Product_Edit_Tabs extends Mage_Adminhtml_Block_Catalog_Product_Edit_Tabs { protected function _prepareLayout() { parent::_prepareLayout(); $product = $this->getProduct(); $productId = $product->getId(); if ($productId) { $type = $product->getTypeId(); $configurableModel = Mage::getModel('Mage_Catalog_Model_Product_Type_Configurable'); $parentsIds = $configurableModel->getParentIdsByChild($productId); if ( in_array($type, array(Mage_Catalog_Model_Product_Type::TYPE_SIMPLE, Mage_Catalog_Model_Product_Type::TYPE_VIRTUAL, Mage_Downloadable_Model_Product_Type::TYPE_DOWNLOADABLE, Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE )) && count($parentsIds) === 0 ) { $this->addTab('omx', array( 'label' => Mage::helper('hooks')->__('OMX'), 'url' => $this->getUrl('hooks/product/', array('_current' => true)), 'class' => 'ajax' )); } } } } 