<?php
 class Omx_Hooks_Block_Admin_Data_Grid extends Mage_Adminhtml_Block_Widget_Grid { public function __construct () { parent::__construct(); $this->setId('omx_dataGrid'); $this->_controller = 'admin_data'; } protected function _prepareCollection () { $collection = Mage::getModel('hooks/data') ->getCollection() ->setOrder('status', 'asc') ; $this->setCollection($collection); return parent::_prepareCollection(); } protected function _prepareColumns () { $this->addColumn('status', array( 'width' => '60px', 'header' => Mage::helper('hooks/data')->__('Status (0 = not in OMX, 1 = in OMX with errors, other = OMX order num)'), 'align' => 'left', 'index' => 'status', 'type' => 'text', 'escape' => true, )); $this->addColumn('order', array( 'header' => Mage::helper('hooks/data')->__('Magento order num'), 'align' => 'left', 'index' => 'order_id', 'type' => 'int', 'escape' => false, )); $this->addColumn('date', array( 'header' => Mage::helper('hooks/data')->__('Date'), 'align' => 'left', 'index' => 'timestamp', 'type' => 'date', 'escape' => true, )); $this->addColumn('resubmited', array( 'width' => '60px', 'header' => Mage::helper('hooks/data')->__('Resubmited (0 = no, 1 = yes)'), 'align' => 'left', 'index' => 'resubmited', 'type' => 'text', 'escape' => true, )); $this->addColumn('parent_id', array( 'width' => '60px', 'header' => Mage::helper('hooks/data')->__('Parent order ID (0 = no parent)'), 'align' => 'left', 'index' => 'parent_id', 'type' => 'text', 'escape' => true, )); $this->addColumn('omx_id', array( 'header' => Mage::helper('hooks/data')->__('Order ID'), 'align' => 'left', 'index' => 'omx_id', )); $this->addColumn('action', array( 'header' => Mage::helper('hooks/data')->__('Action'), 'width' => '150px', 'type' => 'action', 'getter' => 'getOmxId', 'actions' => array( array( 'caption' => Mage::helper('hooks/data')->__('resubmit'), 'url' => array( 'base'=>'*/*/resubmit' ), 'field' => 'id' ), array( 'caption' => Mage::helper('hooks/data')->__('get history'), 'url' => array( 'base'=>'*/*/history' ), 'field' => 'id' ), array( 'caption' => Mage::helper('hooks/data')->__('view entry'), 'url' => array( 'base'=>'*/*/view' ), 'field' => 'id' ) ), 'filter' => false, 'sortable' => false )); return parent::_prepareColumns(); } public function getMultipleRows ($item) { return false; } }