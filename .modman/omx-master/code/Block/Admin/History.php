<?php
 class Omx_Hooks_Block_Admin_History extends Mage_Adminhtml_Block_Abstract { public function _construct() { $this->_blockGroup = 'hooks'; $this->_mode = 'history'; $this->_controller = 'admin'; $this->_headerText = Mage::helper('hooks')->__('History for entry: ' ); } protected function _toHtml () { $string = '<h1>History page</h1>'; $string .= Mage::helper('hooks')->__('Resend information for entry nr. ' . $this->getData('parent')->getOmxId() ."<br/>"); $string .= Mage::helper('hooks')->__('<em>Order ID: ' . $this->getData('parent')->getOrderId() ."</em><br/>"); $string .= "<ul>"; foreach ($this->getData('children') as $child) { $link = $this->getUrl('*/*/view', array( 'id' => $child->getOmxId() )); $session = Mage::getSingleton('customer/session'); $string .= "<li><a href='". $link ."'>". $child->getOmxId() ." | " . $child->getStatus(). " | " . $child->getTimestamp(). "</a></li>"; } $string .= "</ul>"; return $string; } } 