<?php
$installer = $this; $installer->startSetup(); $installer->run("
UPDATE {$this->getTable('omx__settings')} SET `value` = '1.2' WHERE {$this->getTable('omx__settings')}.`name`='omxVersion' LIMIT 1 ;
INSERT INTO {$this->getTable('omx__settings')} (`id`, `name`, `value`) VALUES (NULL, 'useOmxGiftCertificates', '0');
"); $installer->installEntities( array ( 'quote' => array( 'entity_model' => 'quote', 'table' => 'sales/quote', 'attributes' => array( 'omx_gift_certificates' => array('type' => 'text'), 'base_omx_gift_certificates_amount' => array('type' => 'decimal'), 'base_omx_gift_certificates_amount_used' => array('type' => 'decimal'), ), ), 'order' => array( 'entity_model' => 'order', 'table' => 'sales/order', 'increment_model'=>'eav/entity_increment_numeric', 'increment_per_store'=>true, 'backend_prefix'=>'sales_entity/order_attribute_backend', 'attributes' => array( 'omx_gift_certificates' => array( 'label' => 'Omx Gift Certificates', 'type' => 'text', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, ), 'base_omx_gift_certificates_amount_used' => array( 'label' => 'Base Omx Gift Certificates Amount Used', 'type' => 'decimal', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, ), 'omx_gift_certificates_amount_used' => array( 'label' => 'Omx Gift Certificates Amount Used', 'type' => 'decimal', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, ), ), ), ) ); $installer->addAttribute('invoice', 'base_omx_gift_certificates_amount', array('type'=>'decimal')); $installer->addAttribute('invoice', 'omx_gift_certificates_amount', array('type'=>'decimal')); $installer->endSetup(); 