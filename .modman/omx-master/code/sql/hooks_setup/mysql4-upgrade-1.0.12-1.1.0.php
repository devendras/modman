<?php
$installer = $this; $installer->startSetup(); $installer->run("
UPDATE {$this->getTable('omx__settings')} SET `value` = '1.1.0' WHERE {$this->getTable('omx__settings')}.`name`='omxVersion' LIMIT 1 ;
INSERT INTO {$this->getTable('omx__settings')} (`id`, `name`, `value`) VALUES (NULL, 'shippingMethodNonShippable', '(magento non-shippable order)');
"); $installer->installEntities( array ( 'catalog_product' => array( 'entity_model' => 'catalog/product', 'attribute_model' => 'catalog/resource_eav_attribute', 'table' => 'catalog/product', 'additional_attribute_table' => 'catalog/eav_attribute', 'entity_attribute_collection' => 'catalog/product_attribute_collection', 'attributes' => array( 'omx_last_checked' => array( 'type' => 'datetime', 'backend' => 'eav/entity_attribute_backend_datetime', 'frontend' => '', 'label' => 'Last Checked in OMX', 'note' => 'Last call to ItemInformationRequest (ItIR100)', 'input' => 'date', 'class' => 'validate-date', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_product_exists' => array( 'type' => 'int', 'backend' => '', 'frontend' => '', 'label' => 'Product exists on OMX', 'input' => 'boolean', 'class' => '', 'source' => 'eav/entity_attribute_source_boolean', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '0', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_details_match' => array( 'type' => 'int', 'backend' => '', 'frontend' => '', 'label' => 'Product Details match in OMX', 'input' => 'boolean', 'class' => '', 'source' => 'eav/entity_attribute_source_boolean', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '0', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_last_pushed' => array( 'type' => 'datetime', 'backend' => 'eav/entity_attribute_backend_datetime', 'frontend' => '', 'label' => 'Last Pushed to OMX', 'input' => 'date', 'class' => 'validate-date', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_last_updated' => array( 'type' => 'datetime', 'backend' => 'eav/entity_attribute_backend_datetime', 'frontend' => '', 'label' => 'Last Updated in OMX', 'input' => 'date', 'class' => 'validate-date', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_last_inventory_check' => array( 'type' => 'datetime', 'backend' => 'eav/entity_attribute_backend_datetime', 'frontend' => '', 'label' => 'Last OMX Inventory check', 'input' => 'date', 'class' => 'validate-date', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_last_received_from_omx' => array( 'type' => 'datetime', 'backend' => 'eav/entity_attribute_backend_datetime', 'frontend' => '', 'label' => 'Last time data was received from OMX', 'input' => 'date', 'class' => 'validate-date', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_standing_order_configs' => array( 'type' => 'text', 'backend' => '', 'frontend' => '', 'label' => 'Standing Order Configurations from OMX', 'input' => 'textarea', 'class' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ), 'omx_payment_plan_infos' => array( 'type' => 'text', 'backend' => '', 'frontend' => '', 'label' => 'Payment Plan Informations from OMX', 'input' => 'textarea', 'class' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'default' => '', 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'visible_in_advanced_search' => false, 'unique' => false, 'apply_to' => 'simple' ) ) ), 'order' => array( 'entity_model' => 'order', 'table' => 'sales/order', 'increment_model'=>'eav/entity_increment_numeric', 'increment_per_store'=>true, 'backend_prefix'=>'sales_entity/order_attribute_backend', 'attributes' => array( 'omx_order_storecode' => array( 'label' => 'Omx Order Store Code', 'type' => 'text', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, ) ) ), 'order_payment' => array( 'entity_model' => 'sales/order_payment', 'attribute_model' => '', 'table' => 'sales/order_entity', 'attributes' => array( 'omx_order_payment_creditcardtoken' => array( 'label' => 'Omx Order Payment Credit Card Token', 'type' => 'varchar', 'input' => 'text', 'default' => '', 'class' => '', 'backend' => '', 'frontend' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'unique' => false, ), 'omx_order_payment_creditcardtype' => array( 'label' => 'Omx Order Payment Credit Card Type', 'type' => 'int', 'input' => 'text', 'default' => '', 'class' => '', 'backend' => '', 'frontend' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'unique' => false, ), 'omx_order_payment_creditcardfirst6digits' => array( 'label' => 'Omx Order Payment Credit Card First 6 Digits', 'type' => 'varchar', 'input' => 'text', 'default' => '', 'class' => '', 'backend' => '', 'frontend' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'unique' => false, ), 'omx_order_payment_creditcardlast4digits' => array( 'label' => 'Omx Order Payment Credit Card Last 4 Digits', 'type' => 'varchar', 'input' => 'text', 'default' => '', 'class' => '', 'backend' => '', 'frontend' => '', 'source' => '', 'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL, 'visible' => true, 'required' => false, 'user_defined' => true, 'searchable' => false, 'filterable' => false, 'comparable' => false, 'visible_on_front' => false, 'unique' => false, ) ) ) ) ); $installer->endSetup(); 