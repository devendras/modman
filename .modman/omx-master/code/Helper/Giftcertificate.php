<?php
 class Omx_Hooks_Helper_Giftcertificate extends Mage_Core_Helper_Abstract { public function getCertificates(Varien_Object $from) { $value = $from->getOmxGiftCertificates(); if (!$value) { return array(); } return unserialize($value); } public function setCertificates(Varien_Object $to, $value) { $serializedValue = serialize($value); $to->setOmxGiftCertificates($serializedValue); } public function unsetCertificates(Mage_Sales_Model_Quote $quote) { $quote->setOmxGiftCertificates(NULL); $quote->setBaseOmxGiftCertificatesAmount(NULL); $quote->setBaseOmxGiftCertificatesAmountUsed(NULL); } public function canUseGiftcertificates() { if (method_exists(Mage::helper('core/data'), 'isModuleEnabled')) { $gcaEnabled = Mage::helper('core/data')->isModuleEnabled('Enterprise_GiftCardAccount'); } else { $gcaEnabled = true; } if ($gcaEnabled && Mage::helper('core/data')->isModuleOutputEnabled('Enterprise_GiftCardAccount') ) { return true; } else { return false; } } }